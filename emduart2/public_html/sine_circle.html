<!doctype html>
<html>
  <head>
    <title>Sine Wheel</title>
  </head>
  <body>
    <p><button id="reset-button">Reset</button></p>
    <canvas id="the-canvas" style="border: 1px dotted black"></canvas>
    <script type="text/javascript">

// Some cross-browser issues. Kindly skip over this function.
(function() {
  var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||
                              window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
  window.requestAnimationFrame = requestAnimationFrame;
})();

// Grab the canvas and context from the document. We draw with the context.
var theCanvas = document.getElementById("the-canvas");
theCanvas.width = 1000;
theCanvas.height = 600;
//GF: changes in the Canvas dimensions do not propagate yet.
//GF: nor do the window resizings.
//GF: find or invent local coordinates rel viewport
var ctx = theCanvas.getContext("2d");

// Calculate variables used in drawing
var center = [theCanvas.width / 2, theCanvas.height / 2];
var circleRadius = 150;
var circleCenter = [circleRadius + 10, theCanvas.height / 2]
var angleSize = Math.PI / 100;
var animIndex = 0;

// Draw lines from an angle on the circle to the axis
function drawSinLine(angle) {
  var x = circleCenter[0] + Math.cos(angle) * circleRadius;
  var y = circleCenter[1] - Math.sin(angle) * circleRadius;
  ctx.moveTo(x, y);
  ctx.lineTo(circleCenter[0] + circleRadius + angle * 50, y);
  ctx.lineTo(circleCenter[0] + circleRadius + angle * 50, circleCenter[1]);
}

function draw() {
  // Ask the browser to call this function next chance it gets
  requestAnimationFrame(draw);

  // Clear the canvas
  ctx.fillStyle = "white";
  ctx.fillRect(0, 0, theCanvas.width, theCanvas.height);

  ctx.beginPath();

  // Circle
  ctx.arc(circleCenter[0], circleCenter[1], circleRadius, 0, Math.PI * 2, false);

  // Y-Axis
  ctx.moveTo(circleCenter[0] + circleRadius, center[1] + circleRadius);
  ctx.lineTo(circleCenter[0] + circleRadius, center[1] - circleRadius);

  // X-Axis
  ctx.moveTo(circleCenter[0] + circleRadius, center[1]);
  ctx.lineTo(theCanvas.width, center[1]);

  // Series of angle lines
  for (var angleIndex = 0; angleIndex < animIndex; angleIndex++) {
    drawSinLine(angleIndex * angleSize);
  }

  // Stroke all the paths above in black
  ctx.lineWidth = 1;
  ctx.strokeStyle = "black";
  ctx.stroke();

  // Highlight the last angle linein blue
  ctx.beginPath();
  drawSinLine(animIndex * angleSize);
  ctx.lineWidth = 4;
  ctx.strokeStyle = "blue";
  ctx.stroke();

  // Advance the animation
  animIndex++;
}

// Now that everything is defined, start the rendering loop.
draw();

// Get the reset button and register a click event listener that resets the animation
document.getElementById("reset-button").addEventListener("click", function() { animIndex = 0 });
    </script>
  </body>
</html>
